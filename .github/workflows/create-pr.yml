name: create-pr
on:
  workflow_dispatch:

jobs:
  create-pull-request:
    name: Create pull request
    runs-on: ubuntu-latest
    container: michaelpstimpson/sfdx-plus:latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3

      - name: Create Pull Request
        run: |
          git config --global --add safe.directory /__w/actions/actions
          RELEASE_NAME="release/main-$(date '+%Y%m%d_%H%M')"
          git checkout -b $RELEASE_NAME
          git merge -X theirs origin/dev
          PR_NUMBER=gh pr create \
          --title "Automated PR" \
          --body ":rocket :robot:" \
          --base main \
          --head RELEASE_NAME \
          --label auto-pr \
          --reviewer MichaelPStimpson
          echo "The PR Number is: $PR_NUMBER"
      # - name: Create Pull Request
      #   run: |
      #     gh pr create \
      #     --title "Automated PR" \
      #     --body ":rocket :robot:" \
      #     --base main \
      #     --head dev \
      #     --label auto-pr \
      #     --reviewer MichaelPStimpson
